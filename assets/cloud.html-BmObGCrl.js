import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as n}from"./app-GvbLqAZr.js";const l={};function t(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="云上工具" tabindex="-1"><a class="header-anchor" href="#云上工具"><span>云上工具</span></a></h1><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span><a href="https://vuepress.mirror.docker-practice.com/" target="_blank" rel="noopener noreferrer">Docker</a></span></a></h2><ul><li>相关概念： <ul><li>镜像和容器</li><li>容器是镜像的实例</li></ul></li><li>镜像是分层的，容器是在镜像的基础上加了一层</li><li>通过 Dockerfile 创建<strong>可维护</strong>的镜像</li><li>通过 Linux 的 Namespace 等技术实现容器级的虚拟化</li><li>需要代理加速，维护这两个环境变量 <code>HTTP_PROXY，HTTPS_PROXY</code></li></ul><h2 id="k8s" tabindex="-1"><a class="header-anchor" href="#k8s"><span><a href="https://kubernetes.io/zh-cn/" target="_blank" rel="noopener noreferrer">K8s</a></span></a></h2><ul><li><p>管理<strong>容器化</strong>的工作和服务</p></li><li><p>自动部署到不同的节点，自动实现负载均衡，容灾管理等</p></li><li><p>相关概念</p><ul><li><p><code>Pod</code>：一组紧密关联的容器集合，是 Kubernetes 调度的基本单位。Pod 的设计理念是支持多个容器在一个 Pod 中<strong>共享网络和文件系统</strong></p><ul><li>主要两种用法：运行单个容器的 pod（最常见），运行多个紧密联系的容器</li><li>共享 IPC 和 Network namespace（可 localhost 通信）</li><li>所有 Pod 内容器都可以访问共享的 Volume，可以访问共享数据</li><li>优雅终止：Pod 删除的时候先给其内的进程发送 SIGTERM，等待一段时间（grace period）后才强制停止依然还在运行的进程</li><li>模板 <ul><li><code>containerPort</code>：表示容器内部应用监听的端口，即**容器内访问的端口。**这个是 <strong><a href="https://stackoverflow.com/questions/57197095/why-do-we-need-a-port-containerport-in-a-kuberntes-deployment-container-definiti" target="_blank" rel="noopener noreferrer">informational</a></strong> 的（但可以多加一个 name，使 service 能通过 name 绑定转发 ip）</li></ul></li></ul></li><li><p><code>Deployment</code>：用于管理运行一个应用负载的一组 Pod，通常适用于不保持状态的负载。管理一个 rs，它支持滚动更新等高级特性</p></li><li><p><code>ReplicaSet</code>：维持在任何给定时间运行的一组<strong>稳定</strong>的副本 Pod。 通常用 Deployment 自动管理。</p></li><li><p><code>DameonSet</code>：定义了提供节点本地设施的 Pod。每个 node 跑一个这个 Pod</p></li><li><p><code>Service</code>：向外提供一个地址，将对该地址的请求转发至指定的 Pod 中，也可以通过服务名称访问</p><ul><li>模板 <ul><li><code>type</code>： <ul><li><code>ClusterIP</code>：通过集群的内部 IP 公开 Service，选择该值时 Service 只能够在集群内部访问。通过 Ingress 可以公开服务</li><li><code>NodePort</code>: 使可以通过 <code>节点IP:port</code> 的方式访问服务</li></ul></li><li><code>port</code>：向外暴露的端口</li><li><code>targetPort</code>：转发到 pod 的端口，可以是 name</li></ul></li></ul></li><li><p><code>Ingress</code>：提供从集群外部到集群内服务的 HTTP 和 HTTPS 路由，需要有一个 <strong>ingress controller</strong></p><ul><li><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Ingress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sat-edge-develop</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sat</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  annotations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    kubernetes.io/ingress.class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;traefik&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  rules</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">k3s.act.buaa.edu.cn</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/images</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        pathType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Prefix</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        backend</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dota-nginx-service</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><code>volume</code>：让一组容器得以共享数据</p><ul><li><p><code>configmap</code>：将（非机密）配置挂载到指定位置供容器使用</p></li><li><p><code>secret</code>：用于机密配置</p></li><li><p><code>Persistent Volume（持久卷）</code>：这是集群资源，需要通过<code>PV Claim</code>来申领，可以通过 <code>StorageClass</code> 来动态制备</p><ul><li><p>这也是将持久化存储附加到一个容器的最佳方法：</p><ul><li>管理员设置持久卷制备程序，即 <strong>provisioner</strong></li><li>管理员创建 <code>StorageClass</code></li><li>用户进行 PVC 来申领持久卷</li><li>最终持久卷和 Pod 解耦</li></ul></li><li><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">allowVolumeExpansion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">storage.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">StorageClass</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  annotations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    meta.helm.sh/release-name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-provisioner</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    meta.helm.sh/release-namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kube-system</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  creationTimestamp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2024-10-18T02:23:56Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-subdir-external-provisioner</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    app.kubernetes.io/managed-by</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Helm</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    chart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-subdir-external-provisioner-4.0.18</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    heritage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Helm</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    release</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-provisioner</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-client</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  resourceVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;75320&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  uid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">4944bd0b-e318-4ea3-9011-916aac8f67f0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  archiveOnDelete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">provisioner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">cluster.local/nfs-provisioner-nfs-subdir-external-provisioner</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">reclaimPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Retain</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">volumeBindingMode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Immediate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li></li><li><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PersistentVolumeClaim</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dota-source-imgs</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sat-edge</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  accessModes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ReadWriteMany</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  resources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    requests</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">15Gi</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  storageClassName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-client</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ul></li></ul><h2 id="prometheus" tabindex="-1"><a class="header-anchor" href="#prometheus"><span><a href="https://prometheus.ac.cn/" target="_blank" rel="noopener noreferrer">Prometheus</a></span></a></h2><ul><li><p>一个监控工具，可以监控 K8s，比如监控K8s每个节点的硬件信息</p></li><li><p>搭档 Grafana，一个数据可视化的工具</p></li><li><p><a href="https://prometheus.github.io/client_python/" target="_blank" rel="noopener noreferrer">Python client</a></p><ul><li><p>写的过程就是将数据用其提供的指标收集起来，然后每次采集暴露最新的数据即可</p></li><li><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">random_value </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Gauge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;random_integer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;A random integer that changes over time&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">@app</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">route</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;/metrics&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> metrics</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">generate_latest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">mimetype</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">CONTENT_TYPE_LATEST</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h2 id="helm" tabindex="-1"><a class="header-anchor" href="#helm"><span><a href="https://helm.sh/zh/docs/" target="_blank" rel="noopener noreferrer">Helm</a></span></a></h2><ul><li>K8s 的包管理器</li><li>相比直接使用 <code>kubectl apply -f</code> 来手动部署 YAML 文件，Helm 的优势在于它将复杂的 Kubernetes 配置和部署过程抽象化，简化了集群管理。</li><li>相关概念 <ul><li><code>chart</code>：代表 Helm 包，类似模板，封装 Kubernetes 的资源定义，包括 Pods、Services、Ingress 等 Kubernetes 资源</li><li><code>Repository</code>：存放 chart 的地方</li><li><code>Release</code>：chart 实例</li></ul></li></ul><h2 id="harbor" tabindex="-1"><a class="header-anchor" href="#harbor"><span>Harbor</span></a></h2><ul><li>企业级的镜像仓库</li><li>可以用来做私有化镜像仓库</li><li>E.g. Push dota-1 dota-2 dota-3 后配置 Docker 从该私有化镜像仓库拉取镜像</li></ul>`,11)]))}const k=i(l,[["render",t],["__file","cloud.html.vue"]]),d=JSON.parse('{"path":"/posts/backend/cloud/cloud.html","title":"云上工具","lang":"zh-CN","frontmatter":{"date":"2025-01-04T00:00:00.000Z","category":["云"],"tag":["k8s","prometheus","grafana","helm","harbor"],"footer":"凉了的馒头","description":"云上工具 Docker 相关概念： 镜像和容器 容器是镜像的实例 镜像是分层的，容器是在镜像的基础上加了一层 通过 Dockerfile 创建可维护的镜像 通过 Linux 的 Namespace 等技术实现容器级的虚拟化 需要代理加速，维护这两个环境变量 HTTP_PROXY，HTTPS_PROXY K8s 管理容器化的工作和服务 自动部署到不同的节...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/posts/backend/cloud/cloud.html"}],["meta",{"property":"og:site_name","content":"博客演示"}],["meta",{"property":"og:title","content":"云上工具"}],["meta",{"property":"og:description","content":"云上工具 Docker 相关概念： 镜像和容器 容器是镜像的实例 镜像是分层的，容器是在镜像的基础上加了一层 通过 Dockerfile 创建可维护的镜像 通过 Linux 的 Namespace 等技术实现容器级的虚拟化 需要代理加速，维护这两个环境变量 HTTP_PROXY，HTTPS_PROXY K8s 管理容器化的工作和服务 自动部署到不同的节..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-28T02:00:41.000Z"}],["meta",{"property":"article:tag","content":"k8s"}],["meta",{"property":"article:tag","content":"prometheus"}],["meta",{"property":"article:tag","content":"grafana"}],["meta",{"property":"article:tag","content":"helm"}],["meta",{"property":"article:tag","content":"harbor"}],["meta",{"property":"article:published_time","content":"2025-01-04T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-28T02:00:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"云上工具\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-04T00:00:00.000Z\\",\\"dateModified\\":\\"2025-02-28T02:00:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Tyz\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"Docker","slug":"docker","link":"#docker","children":[]},{"level":2,"title":"K8s","slug":"k8s","link":"#k8s","children":[]},{"level":2,"title":"Prometheus","slug":"prometheus","link":"#prometheus","children":[]},{"level":2,"title":"Helm","slug":"helm","link":"#helm","children":[]},{"level":2,"title":"Harbor","slug":"harbor","link":"#harbor","children":[]}],"git":{"createdTime":1736478285000,"updatedTime":1740708041000,"contributors":[{"name":"BUAA-TYZ","username":"BUAA-TYZ","email":"2506741037@qq.com","commits":2,"url":"https://github.com/BUAA-TYZ"}]},"readingTime":{"minutes":3.67,"words":1100},"filePathRelative":"posts/backend/cloud/cloud.md","localizedDate":"2025年1月4日","excerpt":"\\n<h2><a class=\\"header-anchor\\" href=\\"#docker\\"><span></span></a><a href=\\"https://vuepress.mirror.docker-practice.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Docker</a></h2>\\n<ul>\\n<li>相关概念：\\n<ul>\\n<li>镜像和容器</li>\\n<li>容器是镜像的实例</li>\\n</ul>\\n</li>\\n<li>镜像是分层的，容器是在镜像的基础上加了一层</li>\\n<li>通过 Dockerfile 创建<strong>可维护</strong>的镜像</li>\\n<li>通过 Linux 的 Namespace 等技术实现容器级的虚拟化</li>\\n<li>需要代理加速，维护这两个环境变量 <code>HTTP_PROXY，HTTPS_PROXY</code></li>\\n</ul>","autoDesc":true}');export{k as comp,d as data};
